<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Visualizar facturas</title>
    <link rel="stylesheet" href="/css/showFacturar.css">
    <link rel="stylesheet" href="/css/menu.css">
</head>
<body>
<div id="menu" class="menu-container"></div>

<table class="invoice-table">
    <thead>
    <tr>
        <th>Fecha</th>
        <th>Número</th>
        <th>Cliente</th>
        <th>Acciones</th>
    </tr>
    </thead>
    <tbody id="facturas-body"> <!-- Identificador agregado para el cuerpo de la tabla -->
    <!-- Aquí se insertarán las filas de las facturas -->
    </tbody>
</table>

<script src="/js/app.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const facturasTableBody = document.getElementById('facturas-body'); // Obtener el cuerpo de la tabla de facturas

        // Cargar lista de facturas
        fetch('/api/facturas/listar-facturas')
            .then(response => response.json())
            .then(data => {
                facturasTableBody.innerHTML = ''; // Limpiar contenido previo
                data.forEach(factura => {
                    const row = document.createElement('tr');
                    const fechaCell = document.createElement('td');
                    const numeroCell = document.createElement('td');
                    const clienteCell = document.createElement('td');
                    const accionesCell = document.createElement('td');
                    const pdfButton = document.createElement('button');
                    const xmlButton = document.createElement('button');
                    const pdfLink = document.createElement('a');
                    const xmlLink = document.createElement('a');

                    fechaCell.textContent = factura.fecha;
                    numeroCell.textContent = factura.numero;
                    clienteCell.textContent = factura.clienteIdentificacion; // Acceso a la propiedad clienteIdentificacion

                    pdfButton.textContent = 'PDF';
                    pdfLink.href = `/presentation/facturar/pdf?numero=${factura.numero}`;
                    pdfLink.appendChild(pdfButton);

                    xmlButton.textContent = 'XML';
                    xmlLink.href = `/presentation/facturar/xml?numero=${factura.numero}`;
                    xmlLink.appendChild(xmlButton);

                    accionesCell.appendChild(pdfLink);
                    accionesCell.appendChild(xmlLink);

                    row.appendChild(fechaCell);
                    row.appendChild(numeroCell);
                    row.appendChild(clienteCell);
                    row.appendChild(accionesCell);

                    facturasTableBody.appendChild(row);
                });
            })
            .catch(error => console.error('Error al cargar facturas:', error));
    });
</script>

</body>
</html>





